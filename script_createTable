--(HR)
connect hr/123456;

create table ChiNhanh (
	maCN varchar2(50) NOT NULL,
	tenCN varchar2(50),
	truongChiNhanh varchar2(50) ,
	CONSTRAINT chinhanh_pk PRIMARY KEY (maCN)
)

create table NhanVien (
	manv varchar2(50) NOT NULL,
	hoTen varchar2(50) ,
	diaChi varchar2(50) ,
	dienThoai varchar2(50) ,
	email varchar2(50) ,
	maPhog varchar2(50) ,
	chiNhanh varchar2(50),
	luong number(10),
	CONSTRAINT nhanvien_pk PRIMARY KEY (manv)
)

create table  PhanCong (
	manv varchar2(50) NOT NULL,
	duAN varchar2(50),
	vaiTro varchar2(50),
	phuCap number(10),
	CONSTRAINT phancong_pk PRIMARY KEY (manv, duAN)
)

create table  ChiTieu (
	maChiTieu varchar2(50) NOT NULL,
	tenChiThi varchar2(50),
	soTien number(10),
	duAN varchar2(50),
	CONSTRAINT chitieu_pk PRIMARY KEY (maChiTieu)
)
create table PhongBan (
	maPhong varchar2(50) NOT NULL,
	tenPhong varchar2(50),
	TruongPhong varchar2(50),
	ngayNhanChuc DATE,
	soNhanVien number(5),
	chiNhanh varchar2(50),
	CONSTRAINT phongban_pk PRIMARY KEY (maPhong)
)

create table DuAn(
	maDA varchar2(50) NOT NULL ,
	tenDA varchar2(50),
	kinhphi number(10),
	phongChuTri varchar2(50),
	TruongDA varchar2(50),
	CONSTRAINT duan_pk PRIMARY KEY (maDA)
)
--------------------------------------------------------------------------------

ALTER TABLE ChiNhanh ADD CONSTRAINT fk_chinhanh_nhanvien FOREIGN KEY (truongChiNhanh) REFERENCES NhanVien (manv);

ALTER TABLE NhanVien ADD CONSTRAINT fk_nhanvien_phongban FOREIGN KEY (maPhog) REFERENCES PhongBan(maPhong);
ALTER TABLE NhanVien ADD CONSTRAINT fk_nhanvien_chinhanh FOREIGN KEY (chiNhanh) REFERENCES ChiNhanh(maCN);

ALTER TABLE PhanCong ADD CONSTRAINT fk_phancong_nhanvien FOREIGN KEY (manv) REFERENCES NhanVien(manv);
ALTER TABLE PhanCong ADD CONSTRAINT fk_phancong_duan FOREIGN KEY (duAN) REFERENCES DuAn(maDA);

ALTER TABLE ChiTieu ADD CONSTRAINT fk_chitieu_duan FOREIGN KEY (duAN) REFERENCES DuAn(maDA);

ALTER TABLE PhongBan ADD CONSTRAINT fk_phongban_chinhanh FOREIGN KEY (chiNhanh) REFERENCES ChiNhanh(maCN);

ALTER TABLE DuAn ADD CONSTRAINT fk_duan_phongban FOREIGN KEY (phongChuTri) REFERENCES PhongBan(maPhong);
ALTER TABLE DuAn ADD CONSTRAINT fk_duan_nhanvien FOREIGN KEY (TruongDA) REFERENCES NhanVien(manv);
